# AI-3 协作标准

## 任务概述
负责多语言系统完善，包括语言包扩展、翻译服务重构、组件国际化等功能。

## 代码规范

### 1. 文件命名规范
- 语言包：`src/locales/[语言代码]/[模块].json`
- 翻译服务：`src/lib/i18nService.ts`
- 翻译组件：`src/components/i18n/[组件名].tsx`
- 类型定义：`src/types/i18n.ts`
- 翻译工具：`src/utils/translation.ts`

### 2. 语言代码规范
- 使用标准的语言代码：`zh-CN`, `en-US`, `ja-JP`, `ko-KR`
- 默认语言：`zh-CN`
- 回退语言：`en-US`

### 3. 语言包结构
```json
{
  "common": {
    "loading": "加载中...",
    "error": "错误",
    "success": "成功",
    "confirm": "确认",
    "cancel": "取消"
  },
  "navigation": {
    "home": "首页",
    "feed": "动态",
    "chat": "聊天",
    "profile": "个人资料"
  },
  "star": {
    "balance": "Star余额",
    "earned": "获得了 {count} 个Star",
    "spent": "消费了 {count} 个Star"
  },
  "proposal": {
    "title": "提案标题",
    "description": "提案描述",
    "vote": "投票",
    "status": {
      "pending": "待审核",
      "approved": "已通过",
      "rejected": "已拒绝"
    }
  }
}
```

### 4. 翻译函数规范
```typescript
// 基础翻译函数
export function t(key: string, params?: Record<string, any>): string;

// 带命名空间的翻译
export function tn(namespace: string, key: string, params?: Record<string, any>): string;

// 复数形式翻译
export function tp(key: string, count: number, params?: Record<string, any>): string;

// 示例使用
t('common.loading')
tn('star', 'balance')
tp('notification.unread', unreadCount, { count: unreadCount })
```

### 5. 组件国际化规范
```typescript
// 使用翻译Hook
import { useTranslation } from '@/hooks/useTranslation';

function MyComponent() {
  const { t, tn } = useTranslation();
  
  return (
    <div>
      <h1>{t('common.welcome')}</h1>
      <p>{tn('star', 'balance')}: {starCount}</p>
    </div>
  );
}
```

## 提交标准

### 1. 分支管理
- 基于`main`分支创建`feature/ai-3-i18n`分支
- 所有开发在功能分支进行
- 提交前必须通过测试

### 2. 提交信息格式
```
类型(范围): 简短描述

详细描述（可选）

- 变更点1
- 变更点2
```

示例：
```
feat(i18n): 添加日语和韩语支持

- 创建ja-JP和ko-KR语言包
- 更新翻译服务支持新语言
- 完善语言切换组件
```

### 3. 代码审查检查清单
- [ ] 所有新增文本都有翻译
- [ ] 语言包格式正确
- [ ] 翻译键命名规范
- [ ] 参数插值正确
- [ ] 复数形式处理正确
- [ ] 包含基本测试用例

## 翻译质量标准

### 1. 翻译准确性
- 专业术语保持一致
- 上下文语境准确
- 语法正确，表达自然
- 符合目标语言习惯

### 2. 技术术语对照表
| 中文 | English | 日本語 | 한국어 |
|------|---------|--------|--------|
| Star | Star | スター | 스타 |
| 提案 | Proposal | 提案 | 제안 |
| 投票 | Vote | 投票 | 투표 |
| 动态 | Feed | フィード | 피드 |
| 聊天 | Chat | チャット | 채팅 |

### 3. 文本长度考虑
- 英文通常比中文长20-30%
- 日文可能比中文长10-20%
- 韩文长度接近中文
- UI布局需要适应文本长度变化

## 测试要求

### 1. 翻译测试
- 验证所有翻译键都有对应翻译
- 测试参数插值功能
- 测试复数形式处理
- 验证回退机制

### 2. 组件测试
- 测试语言切换功能
- 验证组件在不同语言下的显示
- 测试文本长度适应性
- 验证RTL语言支持（如需要）

### 3. 集成测试
- 测试完整的多语言流程
- 验证语言设置持久化
- 测试动态语言切换

## 协作要求

### 1. 进度报告
- 每日更新`PROGRESS.md`文件
- 记录完成的翻译模块
- 标记需要专业翻译的内容

### 2. 文档更新
- 更新多语言使用文档
- 在`ISSUES.md`中记录翻译问题
- 维护翻译术语表

### 3. 与其他AI的协作
- **不要修改**其他AI负责的文件
- 为其他AI的新功能提供翻译支持
- 在`ISSUES.md`中记录翻译需求

### 4. 集成点说明
- **与AI-1协作**：Star系统相关文本翻译
- **与AI-2协作**：通知消息的多语言支持
- **与AI-4协作**：协作工具界面翻译
- **与汇总AI协作**：提案系统文本翻译

## UI适配规范

### 1. 文本长度适配
- 使用弹性布局
- 设置最小和最大宽度
- 考虑换行处理
- 避免文本截断

### 2. 字体支持
- 确保字体支持目标语言字符
- 考虑字体大小差异
- 处理字体回退方案

### 3. 布局方向
- 支持从左到右（LTR）布局
- 预留从右到左（RTL）布局支持
- 图标和按钮位置适配

## 性能要求

### 1. 语言包加载
- 按需加载语言包
- 语言包压缩和缓存
- 避免重复加载
- 加载失败的回退处理

### 2. 翻译性能
- 翻译函数性能优化
- 避免不必要的重新渲染
- 缓存翻译结果
- 批量翻译处理

## 完成标准

### 1. 功能完成度
- [ ] 支持4种语言（中文、英文、日文、韩文）
- [ ] 所有现有文本都有翻译
- [ ] 语言切换功能完善
- [ ] 翻译服务重构完成
- [ ] 组件国际化完成

### 2. 质量标准
- [ ] 翻译准确性达到95%以上
- [ ] 所有翻译键都有对应翻译
- [ ] 语言包格式正确
- [ ] 单元测试覆盖率 > 80%
- [ ] 组件测试全部通过

### 3. 用户体验
- [ ] 语言切换响应速度快
- [ ] UI适配良好
- [ ] 文本显示完整
- [ ] 符合目标语言习惯

## 翻译资源

### 1. 机器翻译工具
- Google Translate API
- DeepL API
- 百度翻译API
- 腾讯翻译API

### 2. 人工翻译
- 专业术语需要人工校对
- 营销文案需要本地化
- 法律条款需要专业翻译
- 用户界面文本需要用户体验优化

### 3. 翻译管理
- 使用翻译管理平台
- 版本控制翻译文件
- 翻译进度跟踪
- 质量评估机制

## 最终交付

完成后需要提交：
1. 完整的多语言代码
2. 4种语言的语言包
3. 翻译服务和工具
4. 测试用例和测试报告
5. 多语言使用文档
6. 翻译质量报告 